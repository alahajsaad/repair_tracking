import{z as n,a as I}from"./index-DPb_3Eze.js";import{c as F,j as e,B as E,d as w,e as h}from"./index-yGwYt6Nq.js";import{R as C,a as y,L as v}from"./label-wM3WakGA.js";import{U as O,P as q}from"./user-Bd4vM0qs.js";import{I as p}from"./Input-BljE3152.js";import{B as c}from"./Button-nvBNfKxG.js";import{M as z}from"./map-pin-DejgNk_T.js";import{u as x}from"./useMutation-B29Hiwaj.js";import{r as b}from"./request-DFzFQ-HD.js";/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],A=F("trash",R),$=n.enum(["PERSON","ORGANIZATION"]),S=n.object({firstName:n.string().min(1,"First name is required"),lastName:n.string().min(1,"Last name is required")}),k=n.object({companyName:n.string().min(1,"Company name is required"),registrationNumber:n.string().optional(),taxNumber:n.string().optional()}),T=n.object({number:n.string().regex(/^\d{8}$/,"Phone number must be exactly 8 digits")}),B=n.object({streetAddress:n.string().optional(),city:n.string().optional()}),P=n.object({entityType:$,phoneNumbers:n.array(T).min(1,"At least one phone number is required"),addresses:n.array(B)}),X=P.extend({basicInfo:n.union([S,k])});P.extend({basicInfo:n.union([S,k])});const Y=({value:s,onChange:r})=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"type de partenaire"}),e.jsxs(C,{value:s,onValueChange:t=>r(t),className:"flex flex-col gap-4",children:[e.jsxs("div",{className:`flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${s==="PERSON"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(y,{value:"PERSON",id:"person",className:"mr-2"}),e.jsxs(v,{htmlFor:"person",className:"flex items-center cursor-pointer",children:[e.jsx(O,{className:"mr-2 h-5 w-5"}),"Personne individuelle"]})]}),e.jsxs("div",{className:`flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${s==="ORGANIZATION"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(y,{value:"ORGANIZATION",id:"organization",className:"mr-2"}),e.jsxs(v,{htmlFor:"organization",className:"flex items-center cursor-pointer",children:[e.jsx(E,{className:"mr-2 h-5 w-5"}),"Entreprise"]})]})]})]}),ee=({form:s})=>{const r=t=>{var i;const a=s.formState.errors.basicInfo;if(a&&"firstName"in a)return(i=a[t])==null?void 0:i.message};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"basicInfo.firstName",className:"block text-sm font-medium mb-2",children:["Prénom ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("input",{id:"basicInfo.firstName",type:"text",className:"w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent",...s.register("basicInfo.firstName")}),r("firstName")&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r("firstName")})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"basicInfo.lastName",className:"block text-sm font-medium mb-2",children:["Nom ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("input",{id:"basicInfo.lastName",type:"text",className:"w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent",...s.register("basicInfo.lastName")}),r("lastName")&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r("lastName")})]})]})},se=({form:s})=>{const r=t=>{var i;const a=s.formState.errors.basicInfo;if(a&&"companyName"in a)return(i=a[t])==null?void 0:i.message};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"basicInfo.companyName",className:"block text-sm font-medium mb-2",children:["Nom de l'entreprise ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("input",{id:"basicInfo.companyName",type:"text",className:"w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent",...s.register("basicInfo.companyName")}),r("companyName")&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r("companyName")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"basicInfo.registrationNumber",className:"block text-sm font-medium mb-2",children:"Numéro d'enregistrement"}),e.jsx("input",{id:"basicInfo.registrationNumber",type:"text",className:"w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent",...s.register("basicInfo.registrationNumber")}),r("registrationNumber")&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r("registrationNumber")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"basicInfo.taxNumber",className:"block text-sm font-medium mb-2",children:"Numéro fiscal"}),e.jsx("input",{id:"basicInfo.taxNumber",type:"text",className:"w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent",...s.register("basicInfo.taxNumber")}),r("taxNumber")&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r("taxNumber")})]})]})},re=({form:s})=>{const{fields:r,append:t,remove:a}=I({control:s.control,name:"phoneNumbers"});return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Numéros de téléphone  ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(c,{type:"button",onClick:()=>t({number:""}),className:"flex items-center gap-1",variant:"secondary",children:[e.jsx(w,{className:"h-4 w-4"})," Ajouter un numéro"]})]}),r.length===0?e.jsx("div",{className:"flex items-center justify-center p-6 border border-dashed rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground",children:[e.jsx(q,{className:"h-8 w-8 mb-2"}),e.jsx("p",{children:"Aucun numéro de téléphone ajouté pour le moment"}),e.jsx(c,{onClick:()=>t({number:""}),className:"mt-2",variant:"secondary",children:"Ajouter un numéro de téléphone"})]})}):e.jsx("div",{className:"space-y-4",children:r.map((i,o)=>{var d,m,l,u;return e.jsx("div",{className:"flex flex-col md:flex-row gap-4 p-4 border rounded-md bg-card",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`phoneNumbers.${o}.number`,className:"block text-sm font-medium mb-2",children:"Numéro de téléphone"}),e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("div",{className:"w-full",children:e.jsx(p,{id:`phoneNumbers.${o}.number`,type:"tel",...s.register(`phoneNumbers.${o}.number`)})}),e.jsx(c,{variant:"destructive",onClick:()=>a(o),children:e.jsx(A,{className:"h-4 w-4"})})]}),((m=(d=s.formState.errors.phoneNumbers)==null?void 0:d[o])==null?void 0:m.number)&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:(u=(l=s.formState.errors.phoneNumbers[o])==null?void 0:l.number)==null?void 0:u.message})]})},i.id)})})]})},te=({form:s})=>{const{fields:r,append:t,remove:a}=I({control:s.control,name:"addresses"});return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Adresses"}),e.jsxs(c,{type:"button",onClick:()=>t({streetAddress:"",city:""}),className:"flex items-center gap-1",variant:"secondary",children:[e.jsx(w,{className:"h-4 w-4"})," Ajouter une adresse"]})]}),r.length===0?e.jsx("div",{className:"flex items-center justify-center p-6 border border-dashed rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground",children:[e.jsx(z,{className:"h-8 w-8 mb-2"}),e.jsx("p",{children:"Aucune adresse ajoutée pour le moment"}),e.jsx(c,{onClick:()=>t({streetAddress:"",city:""}),className:"mt-2",variant:"secondary",children:"Ajouter une adresse"})]})}):e.jsx("div",{className:"space-y-6",children:r.map((i,o)=>{var d,m,l,u,N,f,g,j;return e.jsxs("div",{className:"p-4 border rounded-md bg-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-medium",children:["Adresse ",o+1]}),e.jsx(c,{variant:"destructive",onClick:()=>a(o),children:e.jsx(A,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-full",children:[e.jsx(p,{label:"Ville",...s.register(`addresses.${o}.city`)}),((m=(d=s.formState.errors.addresses)==null?void 0:d[o])==null?void 0:m.city)&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:(u=(l=s.formState.errors.addresses[o])==null?void 0:l.city)==null?void 0:u.message})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx(p,{label:"Adresse",...s.register(`addresses.${o}.streetAddress`)}),((f=(N=s.formState.errors.addresses)==null?void 0:N[o])==null?void 0:f.streetAddress)&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:(j=(g=s.formState.errors.addresses[o])==null?void 0:g.streetAddress)==null?void 0:j.message})]})]})]},i.id)})})]})},M=s=>b({url:"/person",method:"post",data:s}),G=s=>b({url:"/person",method:"put",data:s}),ae=()=>x({mutationFn:s=>M(s).then(r=>{if(r.status==="error")throw new Error(r.message);return r})}),ne=s=>{const r=h();return x({mutationFn:async t=>{const a=await G(t);if(a.status==="error")throw new Error(a.message);return a},onSuccess:()=>{r.invalidateQueries({queryKey:["partners",s]})}})},L=s=>b({url:"/organization",method:"post",data:s}),Q=s=>b({url:"/organization",method:"put",data:s}),oe=()=>{const s=h();return x({mutationFn:r=>L(r).then(t=>{if(t.status==="error")throw new Error(t.message);return t}),onSuccess:()=>{s.invalidateQueries({queryKey:["Organizations"]})}})},ie=s=>{const r=h();return x({mutationFn:t=>Q(t).then(a=>{if(a.status==="error")throw new Error(a.message);return a}),onSuccess:()=>{s!==0&&r.invalidateQueries({queryKey:["partners",s]})}})};export{te as A,se as C,Y as E,ee as P,oe as a,re as b,X as c,ne as d,ie as e,ae as u};
