import{c as E,r as t,j as e,b as v,P as S}from"./index-yGwYt6Nq.js";import{S as T}from"./SearchInput-BCy2dsEd.js";import{T as k}from"./TableNav-Di70hy7L.js";import{g as w}from"./utils-B63l6kq4.js";import{T as L}from"./Table-jwmTVb_L.js";import{a as I}from"./hooks-D8JWOBQf.js";import"./Input-BljE3152.js";import"./useQuery-wnBeM4WK.js";import"./api-CwCx7HfZ.js";import"./request-DFzFQ-HD.js";/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],p=E("package",A),C=({partners:a})=>{const o=["Partenaire","Type","Numéros de téléphone"],i=t.useMemo(()=>a.map(r=>({id:r.id,partnerName:w(r),entityType:r.entityType,phoneNumbers:r.phoneNumbers.map(c=>c.number).join(" / ")})),[a]);return e.jsx(L,{data:i,head:o,variant:"WithNavigation"})},l=0,R=8,_={CLIENT:"client",SUPPLIER:"fournisseur"},M={CLIENT:"Rechercher un client par nom",SUPPLIER:"Rechercher un fournisseur par nom"},O=()=>{const[a,o]=t.useState(l),[i]=t.useState(R),[r,c]=t.useState(""),m=v(),s=t.useMemo(()=>m.pathname==="/"+S.clients?"CLIENT":"SUPPLIER",[m.pathname]),x=t.useMemo(()=>_[s],[s]),y=t.useMemo(()=>M[s],[s]),{data:n,isPending:u,refetch:d,error:g}=I({keyword:r||void 0,partnerType:s,page:a,size:i}),f=t.useCallback(h=>{c(h),o(l)},[]);t.useEffect(()=>{d()},[r,a,d]),t.useEffect(()=>{o(l),c("")},[s]);const N=()=>e.jsx("div",{className:"w-full flex justify-center items-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500",role:"status","aria-label":"Chargement en cours"})}),b=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx(p,{className:"h-16 w-16 text-gray-400 mb-4","aria-hidden":"true"}),e.jsxs("p",{className:"text-xl font-medium text-gray-600 dark:text-gray-300",children:["Aucun ",x," trouvé"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Essayez de modifier vos critères de recherche"})]}),P=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(p,{className:"h-16 w-16","aria-hidden":"true"})}),e.jsx("p",{className:"text-xl font-medium text-red-600 dark:text-red-400",children:"Erreur lors du chargement"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Veuillez réessayer plus tard"}),e.jsx("button",{onClick:()=>d(),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Réessayer"})]}),j=()=>u?N():g?P():(n==null?void 0:n.content)&&n.content.length>0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx(C,{partners:n.content}),e.jsx(k,{data:n,page:a,setPage:o})]}):b();return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[e.jsx(T,{setSearchKey:f,isPending:u,placeholder:y,value:r}),j()]})};export{O as default};
